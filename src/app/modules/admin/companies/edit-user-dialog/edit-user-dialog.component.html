<div class="dialog-content">
  <h2 mat-dialog-title class="dialog-title">
    <mat-icon class="title-icon">edit</mat-icon>
    Kullanıcıyı Düzenle
  </h2>
  
  <form [formGroup]="editUserForm" (ngSubmit)="onSave()" class="edit-user-form">
    <!-- Name Fields Row -->
    <div class="name-fields-row">
      <mat-form-field appearance="fill" class="name-field">
        <mat-label>Ad</mat-label>
        <input matInput formControlName="firstName" required placeholder="Adını giriniz">
        <mat-error *ngIf="editUserForm.get('firstName')?.hasError('required')">
          Ad zorunludur
        </mat-error>
        <mat-error *ngIf="editUserForm.get('firstName')?.hasError('minlength')">
          En az 2 karakter olmalıdır
        </mat-error>
      </mat-form-field>
      
      <mat-form-field appearance="fill" class="name-field">
        <mat-label>Soyad</mat-label>
        <input matInput formControlName="lastName" required placeholder="Soyadını giriniz">
        <mat-error *ngIf="editUserForm.get('lastName')?.hasError('required')">
          Soyad zorunludur
        </mat-error>
        <mat-error *ngIf="editUserForm.get('lastName')?.hasError('minlength')">
          En az 2 karakter olmalıdır
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Contact Fields Row -->
    <div class="contact-fields-row">
      <mat-form-field appearance="fill" class="contact-field">
        <mat-label>E-posta</mat-label>
        <input matInput formControlName="email" required placeholder="E-posta adresini giriniz">
        <mat-error *ngIf="editUserForm.get('email')?.hasError('required')">
          E-posta adresi zorunludur
        </mat-error>
        <mat-error *ngIf="editUserForm.get('email')?.hasError('email')">
          Geçerli bir e-posta adresi giriniz.
        </mat-error>
      </mat-form-field>
      
      <mat-form-field appearance="fill" class="contact-field">
        <mat-label>Telefon</mat-label>
        <input matInput formControlName="phoneNumber" required placeholder="Telefon numarasını giriniz">
        <mat-error *ngIf="editUserForm.get('phoneNumber')?.hasError('required')">
          Telefon numarası zorunludur
        </mat-error>
        <mat-error *ngIf="editUserForm.get('phoneNumber')?.hasError('pattern')">
          Geçerli bir telefon numarası giriniz
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Date Fields Row -->
    <div class="date-fields-row">
      <mat-form-field appearance="fill" class="date-field">
        <mat-label>Başlangıç Tarihi</mat-label>
        <input matInput [matDatepicker]="startPicker" formControlName="startDate" placeholder="Başlangıç tarihini seçiniz">
        <mat-datepicker-toggle matIconSuffix [for]="startPicker"></mat-datepicker-toggle>
        <mat-datepicker #startPicker></mat-datepicker>
      </mat-form-field>
      
      <mat-form-field appearance="fill" class="date-field">
        <mat-label>Bitiş Tarihi</mat-label>
        <input matInput [matDatepicker]="endPicker" formControlName="endDate" placeholder="Bitiş tarihini seçiniz">
        <mat-datepicker-toggle matIconSuffix [for]="endPicker"></mat-datepicker-toggle>
        <mat-datepicker #endPicker></mat-datepicker>
      </mat-form-field>
    </div>

    <!-- Status Field -->
    <div class="status-section">
      <mat-checkbox formControlName="isActive" color="primary" class="active-checkbox">
        Kullanıcı Aktif
      </mat-checkbox>
      <span class="status-description">
        {{ editUserForm.get('isActive')?.value ? 'Kullanıcı aktif olarak güncellenecek' : 'Kullanıcı pasif olarak güncellenecek' }}
      </span>
    </div>

    <!-- Loading and Error Messages -->
    <div *ngIf="loading" class="loading-section">
      <mat-spinner diameter="30"></mat-spinner>
      <span class="loading-text">Güncelleniyor...</span>
    </div>

    <!-- Dialog Actions -->
    <div class="dialog-actions">
      <button mat-button 
              type="button" 
              (click)="onCancel()"
              [disabled]="loading"
              class="cancel-button">
        İptal
      </button>
      <button mat-flat-button 
              color="primary" 
              type="submit" 
              [disabled]="editUserForm.invalid || loading"
              class="save-button">
        <mat-icon *ngIf="!loading">save</mat-icon>
        <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
        {{ loading ? 'Güncelleniyor...' : 'Kaydet' }}
      </button>
    </div>
  </form>
</div>
