<div class="dialog-container">
  <!-- Dialog Header -->
  <div class="dialog-header">
    <div class="header-content">
      <div class="company-info">
        <mat-icon class="company-icon">business</mat-icon>
        <div class="company-details">
          <h2 class="company-title">{{ data.companyName | uppercase }}</h2>
          <span class="section-subtitle">Şirket Kullanıcıları</span>
        </div>
      </div>
      <div class="header-actions" style="display: flex; align-items: center; gap: 8px;">
        <button mat-flat-button color="primary" (click)="openAddUserDialog()" matTooltip="Kullanıcı Ekle" style="font-weight: 600;">
          <mat-icon>person_add</mat-icon>
          Kullanıcı Ekle
        </button>
        <button mat-flat-button color="accent" (click)="openHospitalDialog()" matTooltip="Hastane Ekle" style="font-weight: 600;">
          <mat-icon>local_hospital</mat-icon>
          Hastane Ekle
        </button>
        <button mat-icon-button 
                (click)="onClose()" 
                class="close-button"
                aria-label="Kapat"
                matTooltip="Kapat"
                style="margin-left: 4px; background: #f5f5f5; border-radius: 50%;">
          <mat-icon style="color: #d32f2f;">close</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Content Section -->
  <div class="dialog-content">    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
      <p class="loading-text">Kullanıcılar yükleniyor...</p>
    </div>

    <!-- Search Section -->
    <div *ngIf="!loading" class="search-section">
      <div class="custom-search-field">
        <label class="search-label">Kullanıcı Ara</label>
        <div class="search-input-wrapper">
          <input class="search-input" 
                 [(ngModel)]="search" 
                 (input)="onSearchChange()" 
                 placeholder="Ad, soyad, e-posta, telefon...">
          <mat-icon class="search-icon">search</mat-icon>
        </div>
      </div>
      
      <div class="results-count" *ngIf="!loading">
        <span class="count-text">
          {{ filteredUsers.length }} kullanıcı bulundu
        </span>
      </div>
    </div>

    <!-- Users List -->
    <div *ngIf="!loading && paginatedUsers.length > 0" class="users-container">
      <div class="users-grid">
        <div *ngFor="let user of paginatedUsers; let i = index" 
             class="user-card">
          <div class="user-avatar">
            <mat-icon class="avatar-icon">person</mat-icon>
          </div>          <div class="user-info">
            <div class="user-name">
              {{ user.firstName | titlecase }} {{ user.lastName | titlecase }}
            </div>
            <div class="user-contact">
              <div class="contact-item" *ngIf="user.email">
                <mat-icon class="contact-icon">email</mat-icon>
                <span>{{ user.email }}</span>
              </div>
              <div class="contact-item" *ngIf="user.phoneNumber">
                <mat-icon class="contact-icon">phone</mat-icon>
                <span>{{ user.phoneNumber }}</span>
              </div>
            </div>
            <div class="user-id">
              <span class="id-label">ID:</span>
              <span class="id-value">{{ user.userId }}</span>
            </div>
          </div>
          
          <!-- User Actions -->
          <div class="user-actions">
            <button mat-icon-button 
                    class="action-btn edit-btn"
                    (click)="onEditUser(user)"
                    matTooltip="Kullanıcıyı Düzenle"
                    aria-label="Düzenle">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button 
                    class="action-btn delete-btn"
                    (click)="onDeleteUser(user)"
                    matTooltip="Kullanıcıyı Sil"
                    aria-label="Sil">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && paginatedUsers.length === 0" class="empty-state">
      <div class="empty-icon">
        <mat-icon>group_off</mat-icon>
      </div>
      <h3 class="empty-title">
        {{ search && search.trim() !== '' ? 'Arama sonucu bulunamadı' : 'Kullanıcı bulunmuyor' }}
      </h3>
      <p class="empty-message">
        {{ search && search.trim() !== '' ?
        'Arama kriterlerinizi değiştirerek tekrar deneyin.' :
        'Bu şirkete henüz kullanıcı atanmamış.'
        }}
      </p>
    </div>    <!-- Pagination -->
    <div *ngIf="!loading && filteredUsers.length > pageSize" class="pagination-container">
      <mat-paginator 
        [length]="filteredUsers.length"
        [pageSize]="pageSize"
        [pageIndex]="pageIndex"
        [pageSizeOptions]="[8, 12, 16, 20]"
        (page)="onPageChange($event)"
        [showFirstLastButtons]="true">
      </mat-paginator>
    </div>
  </div>

  <!-- Dialog Actions -->
  <div class="dialog-actions">
    <button mat-flat-button 
            color="primary"
            (click)="onClose()">
      <mat-icon class="action-icon">check</mat-icon>
      Tamam
    </button>
  </div>
</div>
