<div class="flex flex-col flex-auto min-w-0">
    <fuse-alert *ngIf="(fuseAlert.alert$ | async) as alert" [type]="alert.type" [appearance]="'fill'"
        [dismissible]="true" (closed)="fuseAlert.clearAlert()" @shake class="mb-4">
        {{ alert.message }}
    </fuse-alert>
    <!-- Main -->
    <div class="flex-auto p-6 sm:p-10">
        <!-- CONTENT GOES HERE -->
        <div class="h-400 min-h-400 max-h-400  rounded-2xl">
            <!-- Tablo Başlığı -->
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 gap-4">
                <h2 class="text-3xl font-bold text-gray-800">Example Listesi</h2>
                <div class="flex flex-col sm:flex-row gap-2 w-full sm:w-auto">
                    <button (click)="onOpenCreateModal()"
                        class="inline-flex items-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-semibold px-6 py-2.5 rounded-xl shadow-lg transition focus:outline-none focus:ring-2 focus:ring-primary-400"
                        aria-label="Yeni kayıt ekle">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path>
                        </svg>
                        <span>Example Ekle</span>
                    </button>
                    <input [(ngModel)]="search" type="search"
                        class="w-full sm:w-64 px-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-400 focus:border-primary-400 transition text-gray-700 placeholder-gray-400 bg-white shadow-sm outline-none"
                        placeholder="Aranacak değer girin..." aria-label="Arama">
                </div>
            </div>
            <div class="overflow-x-auto rounded-2xl shadow-lg border border-gray-200 bg-white">
                <table class="min-w-full bg-white rounded-2xl overflow-hidden text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-center px-5 py-4 font-semibold text-gray-700 whitespace-nowrap">#</th>
                            <th class="px-5 py-4 font-semibold text-gray-700 whitespace-nowrap">Alan 1</th>
                            <th class="px-5 py-4 font-semibold text-gray-700 whitespace-nowrap">Alan 2</th>
                            <th class="text-center px-5 py-4 font-semibold text-gray-700 whitespace-nowrap">İşlemler
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of examples | example: search; let i = index"
                            class="border-b last:border-0 hover:bg-primary-50 transition min-h-[56px]">
                            <td class="text-center font-bold text-gray-600 px-5 py-3 align-middle">{{ i + 1 }}</td>
                            <td class="px-5 py-3 text-gray-800 align-middle">{{ data.field1 }}</td>
                            <td class="px-5 py-3 text-gray-800 align-middle">{{ data.field2 }}</td>
                            <td class="text-center px-5 py-3 align-middle">
                                <div class="flex flex-col sm:flex-row gap-2 justify-center items-center">
                                    <button (click)="get(data)"
                                        class="inline-flex items-center gap-1 bg-blue-100 hover:bg-blue-200 text-blue-700 font-medium px-3 py-1.5 rounded-lg transition shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300 border border-transparent hover:border-blue-400"
                                        title="Düzenle" aria-label="Düzenle">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a4 4 0 01-2.828 1.172H7v-2a4 4 0 011.172-2.828z">
                                            </path>
                                        </svg>
                                        <span class="hidden md:inline">Düzenle</span>
                                    </button>
                                    <button (click)="deleteById(data)"
                                        class="inline-flex items-center gap-1 bg-red-100 hover:bg-red-200 text-red-700 font-medium px-3 py-1.5 rounded-lg transition shadow-sm focus:outline-none focus:ring-2 focus:ring-red-300 border border-transparent hover:border-red-400"
                                        title="Sil" aria-label="Sil">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M6 18L18 6M6 6l12 12">
                                            </path>
                                        </svg>
                                        <span class="hidden md:inline">Sil</span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        
        <!-- Tailwind Modal -->
        <div *ngIf="showCreateModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
            <div
                class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl border border-gray-200 relative animate-fadeIn p-4 sm:p-0">
                <!-- Modal Header -->
                <div
                    class="flex justify-between items-center border-b px-6 sm:px-8 py-6 sticky top-0 bg-white rounded-t-3xl z-10">
                    <h1 class="text-2xl font-bold text-gray-800">Example Ekleme Formu</h1>
                    <button (click)="closeModal()"
                        class="ml-4 text-gray-400 hover:text-red-500 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-300 rounded-full p-3 bg-gray-100 hover:bg-red-100 shadow"
                        aria-label="Kapat" tabindex="0" type="button" role="button">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form formValidate #createForm="ngForm" autocomplete="off" (ngSubmit)="create(createForm)" class="pb-2">
                    <div class="p-4 sm:p-10 space-y-8">
                        <div>
                            <label class="block mb-2 text-gray-700 font-semibold text-base" for="field1">Alan 1 <span
                                    class="text-red-500">*</span></label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M16 12H8m0 0l4-4m-4 4l4 4" />
                                    </svg>
                                </span>
                                <input id="field1" type="text" required minlength="3" [(ngModel)]="createModel.field1"
                                    (blur)="field1Touched = true"
                                    class="w-full border border-gray-300 rounded-xl pl-10 pr-4 py-3 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition text-gray-800 placeholder-gray-400 bg-white shadow-sm outline-none focus:outline-primary-500"
                                    name="field1" placeholder="Alan 1 giriniz"
                                    [ngClass]="{'border-red-400': (createForm.submitted || field1Touched) && !createModel.field1}"
                                    aria-required="true" aria-label="Alan 1" autocomplete="off">
                            </div>
                            <div *ngIf="(createForm.submitted || field1Touched) && !createModel.field1"
                                class="text-red-500 text-xs mt-1">Bu alan zorunludur.</div>
                            <div *ngIf="(createForm.submitted || field1Touched) && createModel.field1 && createModel.field1.length < 3"
                                class="text-red-500 text-xs mt-1">En az 3 karakter giriniz.</div>
                        </div>
                        <div>
                            <label class="block mb-2 text-gray-700 font-semibold text-base" for="field2">Alan 2 <span
                                    class="text-red-500">*</span></label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M20 12H4" />
                                    </svg>
                                </span>
                                <input id="field2" type="text" required minlength="3" [(ngModel)]="createModel.field2"
                                    (blur)="field2Touched = true"
                                    class="w-full border border-gray-300 rounded-xl pl-10 pr-4 py-3 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition text-gray-800 placeholder-gray-400 bg-white shadow-sm outline-none focus:outline-primary-500"
                                    name="field2" placeholder="Alan 2 giriniz"
                                    [ngClass]="{'border-red-400': (createForm.submitted || field2Touched) && !createModel.field2}"
                                    aria-required="true" aria-label="Alan 2" autocomplete="off">
                            </div>
                            <div *ngIf="(createForm.submitted || field2Touched) && !createModel.field2"
                                class="text-red-500 text-xs mt-1">Bu alan zorunludur.</div>
                            <div *ngIf="(createForm.submitted || field2Touched) && createModel.field2 && createModel.field2.length < 3"
                                class="text-red-500 text-xs mt-1">En az 3 karakter giriniz.</div>
                        </div>
                        <div class="text-xs text-gray-400 pt-2">* Zorunlu alanlar</div>
                    </div>
                    <div
                        class="flex flex-col sm:flex-row justify-end items-center border-t px-4 sm:px-10 py-6 bg-gray-50 rounded-b-3xl gap-0 sm:gap-4">
                        <div class="order-1 sm:order-1 w-full sm:w-auto flex justify-center sm:justify-end">
                            <fuse-alert *ngIf="showModalAlert" [appearance]="'outline'" [showIcon]="false"
                                [type]="modalAlert?.type" [@shake]="modalAlert?.type === 'error'"
                                class="mr-0 sm:mr-2 min-w-[180px] max-w-xs truncate" [title]="modalAlert?.message">
                                {{modalAlert?.message}}
                            </fuse-alert>
                        </div>
                        <div
                            class="order-2 sm:order-2 w-full sm:w-auto flex justify-center sm:justify-start mt-2 sm:mt-0">
                            <button type="submit"
                                class="bg-primary-600 hover:bg-primary-700 text-white px-12 py-3 rounded-xl font-semibold shadow-lg transition text-base focus:outline-none focus:ring-2 focus:ring-primary-400 flex items-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed"
                                [disabled]="loading || !createForm.form.valid" aria-label="Kaydet">
                                <svg *ngIf="loading" class="animate-spin h-5 w-5 text-white"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
                                </svg>
                                Kaydet
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>